<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Format the occurrence dataset for usage in itsdm — format_observation • itsdm</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Format the occurrence dataset for usage in itsdm — format_observation"><meta property="og:description" content="The focus of this function is to format the dataset
but to keep the dataset as original as possible.
Then the users can modify the data if they want before put it
into this function."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">itsdm</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/introduction_of_itsdm.html">Introduction of itsdm with a virtual species</a>
    </li>
    <li>
      <a href="../articles/itsdm_example.html">Using itsdm to a real species: Africa savanna elephant</a>
    </li>
    <li>
      <a href="../articles/shap_application.html">Applications of Shapley values on SDM explanation</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/LLeiSong/itsdm/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Format the occurrence dataset for usage in <span class="pkg">itsdm</span></h1>
    <small class="dont-index">Source: <a href="https://github.com/LLeiSong/itsdm/blob/HEAD/R/format_observation.R" class="external-link"><code>R/format_observation.R</code></a></small>
    <div class="hidden name"><code>format_observation.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The focus of this function is to format the dataset
but to keep the dataset as original as possible.
Then the users can modify the data if they want before put it
into this function.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">format_observation</span><span class="op">(</span></span>
<span>  <span class="va">obs_df</span>,</span>
<span>  eval_df <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  split_perc <span class="op">=</span> <span class="fl">0.3</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">123</span>,</span>
<span>  obs_crs <span class="op">=</span> <span class="fl">4326</span>,</span>
<span>  eval_crs <span class="op">=</span> <span class="fl">4326</span>,</span>
<span>  x_col <span class="op">=</span> <span class="st">"x"</span>,</span>
<span>  y_col <span class="op">=</span> <span class="st">"y"</span>,</span>
<span>  obs_col <span class="op">=</span> <span class="st">"observation"</span>,</span>
<span>  obs_type <span class="op">=</span> <span class="st">"presence_only"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>obs_df</dt>
<dd><p>(<code>data.frame</code>). The <code>data.frame</code> style table that
include x and y coordinate and observation of training dataset.
This parameter is required as it is the training dataset.
Note: it only takes <code>data.frame</code> to reduce the risk of column name mismatch
between <code>data.frame</code> and other formats such as <code>tibble</code>.</p></dd>


<dt>eval_df</dt>
<dd><p>(<code>data.frame</code> or <code>NULL</code>) The <code>data.frame</code> style table that
include x and y coordinate and observation of evaluation dataset.
Note: it only takes <code>data.frame</code> to reduce the risk of column name mismatch
between <code>data.frame</code> and other formats such as <code>tibble</code>.</p></dd>


<dt>split_perc</dt>
<dd><p>(<code>numeric</code>) a <code>numeric</code> between 0 and 1 corresponding to the
percentage of data used to evaluate the models.
Only required if <code>eval_df</code> is <code>NULL</code>.</p></dd>


<dt>seed</dt>
<dd><p>(<code>integer</code>) The seed to split train and evaluation set.
The default value is <code>123</code>. Only required if <code>eval_df</code> is <code>NULL</code>.</p></dd>


<dt>obs_crs</dt>
<dd><p>(<code>integer</code>, <code>numeric</code>, <code>character</code>, or <code>crs</code>)
The EPSG code, CRS string, or <code>sf::crs</code> object of the coordinate system of
the training dataset. It corresponds to <code>x_col</code> and <code>y_col</code> in <code>obs_df</code>.</p></dd>


<dt>eval_crs</dt>
<dd><p>(<code>integer</code>, <code>numeric</code>, <code>character</code>, or <code>crs</code>)
The EPSG code, CRS string, or <code>sf::crs</code> object of the coordinate system
of the evaluation dataset. Only required if  <code>eval_df</code> is not <code>NULL</code>.
It corresponds to <code>x_col</code> and <code>y_col</code> in <code>eval_df</code> if any.</p></dd>


<dt>x_col</dt>
<dd><p>(<code>character</code>) The name of column that is x coordinate
in <code>obs_df</code> and <code>eval_df</code> if not <code>NULL</code>.</p></dd>


<dt>y_col</dt>
<dd><p>(<code>character</code>) The name of column that is y coordinate
in <code>obs_df</code> and <code>eval_df</code> if not <code>NULL</code>.</p></dd>


<dt>obs_col</dt>
<dd><p>(<code>character</code>) The name of column that represents observations
in <code>obs_df</code> and <code>eval_df</code> if not <code>NULL</code>.</p></dd>


<dt>obs_type</dt>
<dd><p>(<code>character</code>) The type of observation to be formatted to.
Only can be one of <code>c("presence_only", "presence_absence")</code>.
Note that if "presence_only" is set, the absences in <code>obs_df</code> will be deleted.
This only affect <code>obs_df</code>, <code>eval_df</code> will keep the original type no matter it
is an independent one or is split from <code>eval_df</code>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>(<code>FormatOccurrence</code>) A list of</p><ul><li><p>obs (<code>sf</code>) the formatted pts of observations.
The column of observation is "observation".</p></li>
<li><p>obs_type (<code>character</code>) the type of the observations,
presence_only or presence_absence.</p></li>
<li><p>has_eval (<code>logical</code>) whether evaluation dataset is set or generated.</p></li>
<li><p>eval (<code>sf</code>) the formatted pts of observations for evaluation if any.
The column of observation is "observation".</p></li>
<li><p>eval (<code>eval_type</code>)  the type of the observations for evaluation,
presence_only or presence_absence.</p></li>
</ul></div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="print.FormatOccurrence.html">print.FormatOccurrence</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/LLeiSong/itsdm" class="external-link">itsdm</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"occ_virtual_species"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># obs + eval, presence-absence</span></span>
<span><span class="va">obs_df</span> <span class="op">&lt;-</span> <span class="va">occ_virtual_species</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">usage</span> <span class="op">==</span> <span class="st">"train"</span><span class="op">)</span></span>
<span><span class="va">eval_df</span> <span class="op">&lt;-</span> <span class="va">occ_virtual_species</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">usage</span> <span class="op">==</span> <span class="st">"eval"</span><span class="op">)</span></span>
<span><span class="va">x_col</span> <span class="op">&lt;-</span> <span class="st">"x"</span></span>
<span><span class="va">y_col</span> <span class="op">&lt;-</span> <span class="st">"y"</span></span>
<span><span class="va">obs_col</span> <span class="op">&lt;-</span> <span class="st">"observation"</span></span>
<span><span class="va">obs_type</span> <span class="op">&lt;-</span> <span class="st">"presence_absence"</span></span>
<span></span>
<span><span class="va">obs</span> <span class="op">&lt;-</span> <span class="fu">format_observation</span><span class="op">(</span></span>
<span>  obs_df <span class="op">=</span> <span class="va">obs_df</span>, eval_df <span class="op">=</span> <span class="va">eval_df</span>,</span>
<span>  x_col <span class="op">=</span> <span class="va">x_col</span>, y_col <span class="op">=</span> <span class="va">y_col</span>, obs_col <span class="op">=</span> <span class="va">obs_col</span>,</span>
<span>  obs_type <span class="op">=</span> <span class="va">obs_type</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># obs + eval, presence-only</span></span>
<span><span class="va">obs_df</span> <span class="op">&lt;-</span> <span class="va">occ_virtual_species</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">usage</span> <span class="op">==</span> <span class="st">"train"</span><span class="op">)</span></span>
<span><span class="va">eval_df</span> <span class="op">&lt;-</span> <span class="va">occ_virtual_species</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">usage</span> <span class="op">==</span> <span class="st">"eval"</span><span class="op">)</span></span>
<span><span class="va">x_col</span> <span class="op">&lt;-</span> <span class="st">"x"</span></span>
<span><span class="va">y_col</span> <span class="op">&lt;-</span> <span class="st">"y"</span></span>
<span><span class="va">obs_col</span> <span class="op">&lt;-</span> <span class="st">"observation"</span></span>
<span><span class="va">obs_type</span> <span class="op">&lt;-</span> <span class="st">"presence_only"</span></span>
<span></span>
<span><span class="va">obs</span> <span class="op">&lt;-</span> <span class="fu">format_observation</span><span class="op">(</span></span>
<span>  obs_df <span class="op">=</span> <span class="va">obs_df</span>, eval_df <span class="op">=</span> <span class="va">eval_df</span>,</span>
<span>  x_col <span class="op">=</span> <span class="va">x_col</span>, y_col <span class="op">=</span> <span class="va">y_col</span>, obs_col <span class="op">=</span> <span class="va">obs_col</span>,</span>
<span>  obs_type <span class="op">=</span> <span class="va">obs_type</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># obs + eval, different crs, presence-only</span></span>
<span><span class="va">obs_df</span> <span class="op">&lt;-</span> <span class="va">occ_virtual_species</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">usage</span> <span class="op">==</span> <span class="st">"train"</span><span class="op">)</span></span>
<span><span class="va">eval_df</span> <span class="op">&lt;-</span> <span class="va">occ_virtual_species</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">usage</span> <span class="op">==</span> <span class="st">"eval"</span><span class="op">)</span></span>
<span><span class="va">obs_crs</span> <span class="op">&lt;-</span> <span class="fl">4326</span></span>
<span><span class="co"># Fake one</span></span>
<span><span class="va">eval_crs</span> <span class="op">&lt;-</span> <span class="fl">20935</span></span>
<span><span class="va">x_col</span> <span class="op">&lt;-</span> <span class="st">"x"</span></span>
<span><span class="va">y_col</span> <span class="op">&lt;-</span> <span class="st">"y"</span></span>
<span><span class="va">obs_col</span> <span class="op">&lt;-</span> <span class="st">"observation"</span></span>
<span><span class="va">obs_type</span> <span class="op">&lt;-</span> <span class="st">"presence_only"</span></span>
<span></span>
<span><span class="va">obs</span> <span class="op">&lt;-</span> <span class="fu">format_observation</span><span class="op">(</span></span>
<span>  obs_df <span class="op">=</span> <span class="va">obs_df</span>, eval_df <span class="op">=</span> <span class="va">eval_df</span>,</span>
<span>  obs_crs <span class="op">=</span> <span class="va">obs_crs</span>, eval_crs <span class="op">=</span> <span class="va">eval_crs</span>,</span>
<span>  x_col <span class="op">=</span> <span class="va">x_col</span>, y_col <span class="op">=</span> <span class="va">y_col</span>, obs_col <span class="op">=</span> <span class="va">obs_col</span>,</span>
<span>  obs_type <span class="op">=</span> <span class="va">obs_type</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># obs + split, presence-absence</span></span>
<span><span class="va">obs_df</span> <span class="op">&lt;-</span> <span class="va">occ_virtual_species</span></span>
<span><span class="va">split_perc</span> <span class="op">&lt;-</span> <span class="fl">0.5</span></span>
<span><span class="va">seed</span> <span class="op">&lt;-</span> <span class="fl">123</span></span>
<span><span class="va">obs_crs</span> <span class="op">&lt;-</span> <span class="fl">4326</span></span>
<span><span class="va">x_col</span> <span class="op">&lt;-</span> <span class="st">"x"</span></span>
<span><span class="va">y_col</span> <span class="op">&lt;-</span> <span class="st">"y"</span></span>
<span><span class="va">obs_col</span> <span class="op">&lt;-</span> <span class="st">"observation"</span></span>
<span><span class="va">obs_type</span> <span class="op">&lt;-</span> <span class="st">"presence_absence"</span></span>
<span></span>
<span><span class="va">obs</span> <span class="op">&lt;-</span> <span class="fu">format_observation</span><span class="op">(</span></span>
<span>  obs_df <span class="op">=</span> <span class="va">obs_df</span>, split_perc <span class="op">=</span> <span class="va">split_perc</span>,</span>
<span>  x_col <span class="op">=</span> <span class="va">x_col</span>, y_col <span class="op">=</span> <span class="va">y_col</span>,</span>
<span>  obs_col <span class="op">=</span> <span class="va">obs_col</span>, obs_type <span class="op">=</span> <span class="va">obs_type</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># obs, presence-only, no eval</span></span>
<span><span class="va">obs_df</span> <span class="op">&lt;-</span> <span class="va">occ_virtual_species</span></span>
<span><span class="va">eval_df</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span><span class="va">split_perc</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span><span class="va">seed</span> <span class="op">&lt;-</span> <span class="fl">123</span></span>
<span><span class="va">obs_crs</span> <span class="op">&lt;-</span> <span class="fl">4326</span></span>
<span><span class="va">x_col</span> <span class="op">&lt;-</span> <span class="st">"x"</span></span>
<span><span class="va">y_col</span> <span class="op">&lt;-</span> <span class="st">"y"</span></span>
<span><span class="va">obs_col</span> <span class="op">&lt;-</span> <span class="st">"observation"</span></span>
<span><span class="va">obs_type</span> <span class="op">&lt;-</span> <span class="st">"presence_only"</span></span>
<span></span>
<span><span class="va">obs</span> <span class="op">&lt;-</span> <span class="fu">format_observation</span><span class="op">(</span></span>
<span>  obs_df <span class="op">=</span> <span class="va">obs_df</span>, eval_df <span class="op">=</span> <span class="va">eval_df</span>,</span>
<span>  split_perc <span class="op">=</span> <span class="va">split_perc</span>,</span>
<span>  x_col <span class="op">=</span> <span class="va">x_col</span>, y_col <span class="op">=</span> <span class="va">y_col</span>,</span>
<span>  obs_col <span class="op">=</span> <span class="va">obs_col</span>, obs_type <span class="op">=</span> <span class="va">obs_type</span><span class="op">)</span></span>
<span></span></code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Lei Song.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

