<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Format the occurrence dataset for usage in itsdm — format_observation • itsdm</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Format the occurrence dataset for usage in itsdm — format_observation"><meta name="description" content="The focus of this function is to format the dataset
but to keep the dataset as original as possible.
Then the users can modify the data if they want before put it
into this function."><meta property="og:description" content="The focus of this function is to format the dataset
but to keep the dataset as original as possible.
Then the users can modify the data if they want before put it
into this function."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">itsdm</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/introduction_of_itsdm.html">Introduction of itsdm with a virtual species</a></li>
    <li><a class="dropdown-item" href="../articles/itsdm_example.html">Using itsdm to a real species: Africa savanna elephant</a></li>
    <li><a class="dropdown-item" href="../articles/shap_application.html">Applications of Shapley values on SDM explanation</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/LLeiSong/itsdm/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Format the occurrence dataset for usage in <span class="pkg">itsdm</span></h1>
      <small class="dont-index">Source: <a href="https://github.com/LLeiSong/itsdm/blob/main/R/format_observation.R" class="external-link"><code>R/format_observation.R</code></a></small>
      <div class="d-none name"><code>format_observation.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The focus of this function is to format the dataset
but to keep the dataset as original as possible.
Then the users can modify the data if they want before put it
into this function.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">format_observation</span><span class="op">(</span></span>
<span>  <span class="va">obs_df</span>,</span>
<span>  eval_df <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  split_perc <span class="op">=</span> <span class="fl">0.3</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">123</span>,</span>
<span>  obs_crs <span class="op">=</span> <span class="fl">4326</span>,</span>
<span>  eval_crs <span class="op">=</span> <span class="fl">4326</span>,</span>
<span>  x_col <span class="op">=</span> <span class="st">"x"</span>,</span>
<span>  y_col <span class="op">=</span> <span class="st">"y"</span>,</span>
<span>  obs_col <span class="op">=</span> <span class="st">"observation"</span>,</span>
<span>  obs_type <span class="op">=</span> <span class="st">"presence_only"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-obs-df">obs_df<a class="anchor" aria-label="anchor" href="#arg-obs-df"></a></dt>
<dd><p>(<code>data.frame</code>). The <code>data.frame</code> style table that
include x and y coordinate and observation of training dataset.
This parameter is required as it is the training dataset.
Note: it only takes <code>data.frame</code> to reduce the risk of column name mismatch
between <code>data.frame</code> and other formats such as <code>tibble</code>.</p></dd>


<dt id="arg-eval-df">eval_df<a class="anchor" aria-label="anchor" href="#arg-eval-df"></a></dt>
<dd><p>(<code>data.frame</code> or <code>NULL</code>) The <code>data.frame</code> style table that
include x and y coordinate and observation of evaluation dataset.
Note: it only takes <code>data.frame</code> to reduce the risk of column name mismatch
between <code>data.frame</code> and other formats such as <code>tibble</code>.</p></dd>


<dt id="arg-split-perc">split_perc<a class="anchor" aria-label="anchor" href="#arg-split-perc"></a></dt>
<dd><p>(<code>numeric</code>) a <code>numeric</code> between 0 and 1 corresponding to the
percentage of data used to evaluate the models.
Only required if <code>eval_df</code> is <code>NULL</code>.</p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>(<code>integer</code>) The seed to split train and evaluation set.
The default value is <code>123</code>. Only required if <code>eval_df</code> is <code>NULL</code>.</p></dd>


<dt id="arg-obs-crs">obs_crs<a class="anchor" aria-label="anchor" href="#arg-obs-crs"></a></dt>
<dd><p>(<code>integer</code>, <code>numeric</code>, <code>character</code>, or <code>crs</code>)
The EPSG code, CRS string, or <code><a href="https://r-spatial.github.io/sf/reference/coerce-methods.html" class="external-link">sf::crs</a></code> object of the coordinate system of
the training dataset. It corresponds to <code>x_col</code> and <code>y_col</code> in <code>obs_df</code>.</p></dd>


<dt id="arg-eval-crs">eval_crs<a class="anchor" aria-label="anchor" href="#arg-eval-crs"></a></dt>
<dd><p>(<code>integer</code>, <code>numeric</code>, <code>character</code>, or <code>crs</code>)
The EPSG code, CRS string, or <code><a href="https://r-spatial.github.io/sf/reference/coerce-methods.html" class="external-link">sf::crs</a></code> object of the coordinate system
of the evaluation dataset. Only required if  <code>eval_df</code> is not <code>NULL</code>.
It corresponds to <code>x_col</code> and <code>y_col</code> in <code>eval_df</code> if any.</p></dd>


<dt id="arg-x-col">x_col<a class="anchor" aria-label="anchor" href="#arg-x-col"></a></dt>
<dd><p>(<code>character</code>) The name of column that is x coordinate
in <code>obs_df</code> and <code>eval_df</code> if not <code>NULL</code>.</p></dd>


<dt id="arg-y-col">y_col<a class="anchor" aria-label="anchor" href="#arg-y-col"></a></dt>
<dd><p>(<code>character</code>) The name of column that is y coordinate
in <code>obs_df</code> and <code>eval_df</code> if not <code>NULL</code>.</p></dd>


<dt id="arg-obs-col">obs_col<a class="anchor" aria-label="anchor" href="#arg-obs-col"></a></dt>
<dd><p>(<code>character</code>) The name of column that represents observations
in <code>obs_df</code> and <code>eval_df</code> if not <code>NULL</code>.</p></dd>


<dt id="arg-obs-type">obs_type<a class="anchor" aria-label="anchor" href="#arg-obs-type"></a></dt>
<dd><p>(<code>character</code>) The type of observation to be formatted to.
Only can be one of <code>c("presence_only", "presence_absence")</code>.
Note that if "presence_only" is set, the absences in <code>obs_df</code> will be deleted.
This only affect <code>obs_df</code>, <code>eval_df</code> will keep the original type no matter it
is an independent one or is split from <code>eval_df</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>(<code>FormatOccurrence</code>) A list of</p><ul><li><p>obs (<code>sf</code>) the formatted pts of observations.
The column of observation is "observation".</p></li>
<li><p>obs_type (<code>character</code>) the type of the observations,
presence_only or presence_absence.</p></li>
<li><p>has_eval (<code>logical</code>) whether evaluation dataset is set or generated.</p></li>
<li><p>eval (<code>sf</code>) the formatted pts of observations for evaluation if any.
The column of observation is "observation".</p></li>
<li><p>eval (<code>eval_type</code>)  the type of the observations for evaluation,
presence_only or presence_absence.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="print.FormatOccurrence.html">print.FormatOccurrence</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/LLeiSong/itsdm" class="external-link">itsdm</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"occ_virtual_species"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># obs + eval, presence-absence</span></span>
<span><span class="va">obs_df</span> <span class="op">&lt;-</span> <span class="va">occ_virtual_species</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">usage</span> <span class="op">==</span> <span class="st">"train"</span><span class="op">)</span></span>
<span><span class="va">eval_df</span> <span class="op">&lt;-</span> <span class="va">occ_virtual_species</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">usage</span> <span class="op">==</span> <span class="st">"eval"</span><span class="op">)</span></span>
<span><span class="va">x_col</span> <span class="op">&lt;-</span> <span class="st">"x"</span></span>
<span><span class="va">y_col</span> <span class="op">&lt;-</span> <span class="st">"y"</span></span>
<span><span class="va">obs_col</span> <span class="op">&lt;-</span> <span class="st">"observation"</span></span>
<span><span class="va">obs_type</span> <span class="op">&lt;-</span> <span class="st">"presence_absence"</span></span>
<span></span>
<span><span class="va">obs</span> <span class="op">&lt;-</span> <span class="fu">format_observation</span><span class="op">(</span></span>
<span>  obs_df <span class="op">=</span> <span class="va">obs_df</span>, eval_df <span class="op">=</span> <span class="va">eval_df</span>,</span>
<span>  x_col <span class="op">=</span> <span class="va">x_col</span>, y_col <span class="op">=</span> <span class="va">y_col</span>, obs_col <span class="op">=</span> <span class="va">obs_col</span>,</span>
<span>  obs_type <span class="op">=</span> <span class="va">obs_type</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># obs + eval, presence-only</span></span>
<span><span class="va">obs_df</span> <span class="op">&lt;-</span> <span class="va">occ_virtual_species</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">usage</span> <span class="op">==</span> <span class="st">"train"</span><span class="op">)</span></span>
<span><span class="va">eval_df</span> <span class="op">&lt;-</span> <span class="va">occ_virtual_species</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">usage</span> <span class="op">==</span> <span class="st">"eval"</span><span class="op">)</span></span>
<span><span class="va">x_col</span> <span class="op">&lt;-</span> <span class="st">"x"</span></span>
<span><span class="va">y_col</span> <span class="op">&lt;-</span> <span class="st">"y"</span></span>
<span><span class="va">obs_col</span> <span class="op">&lt;-</span> <span class="st">"observation"</span></span>
<span><span class="va">obs_type</span> <span class="op">&lt;-</span> <span class="st">"presence_only"</span></span>
<span></span>
<span><span class="va">obs</span> <span class="op">&lt;-</span> <span class="fu">format_observation</span><span class="op">(</span></span>
<span>  obs_df <span class="op">=</span> <span class="va">obs_df</span>, eval_df <span class="op">=</span> <span class="va">eval_df</span>,</span>
<span>  x_col <span class="op">=</span> <span class="va">x_col</span>, y_col <span class="op">=</span> <span class="va">y_col</span>, obs_col <span class="op">=</span> <span class="va">obs_col</span>,</span>
<span>  obs_type <span class="op">=</span> <span class="va">obs_type</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># obs + eval, different crs, presence-only</span></span>
<span><span class="va">obs_df</span> <span class="op">&lt;-</span> <span class="va">occ_virtual_species</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">usage</span> <span class="op">==</span> <span class="st">"train"</span><span class="op">)</span></span>
<span><span class="va">eval_df</span> <span class="op">&lt;-</span> <span class="va">occ_virtual_species</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">usage</span> <span class="op">==</span> <span class="st">"eval"</span><span class="op">)</span></span>
<span><span class="va">obs_crs</span> <span class="op">&lt;-</span> <span class="fl">4326</span></span>
<span><span class="co"># Fake one</span></span>
<span><span class="va">eval_crs</span> <span class="op">&lt;-</span> <span class="fl">20935</span></span>
<span><span class="va">x_col</span> <span class="op">&lt;-</span> <span class="st">"x"</span></span>
<span><span class="va">y_col</span> <span class="op">&lt;-</span> <span class="st">"y"</span></span>
<span><span class="va">obs_col</span> <span class="op">&lt;-</span> <span class="st">"observation"</span></span>
<span><span class="va">obs_type</span> <span class="op">&lt;-</span> <span class="st">"presence_only"</span></span>
<span></span>
<span><span class="va">obs</span> <span class="op">&lt;-</span> <span class="fu">format_observation</span><span class="op">(</span></span>
<span>  obs_df <span class="op">=</span> <span class="va">obs_df</span>, eval_df <span class="op">=</span> <span class="va">eval_df</span>,</span>
<span>  obs_crs <span class="op">=</span> <span class="va">obs_crs</span>, eval_crs <span class="op">=</span> <span class="va">eval_crs</span>,</span>
<span>  x_col <span class="op">=</span> <span class="va">x_col</span>, y_col <span class="op">=</span> <span class="va">y_col</span>, obs_col <span class="op">=</span> <span class="va">obs_col</span>,</span>
<span>  obs_type <span class="op">=</span> <span class="va">obs_type</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># obs + split, presence-absence</span></span>
<span><span class="va">obs_df</span> <span class="op">&lt;-</span> <span class="va">occ_virtual_species</span></span>
<span><span class="va">split_perc</span> <span class="op">&lt;-</span> <span class="fl">0.5</span></span>
<span><span class="va">seed</span> <span class="op">&lt;-</span> <span class="fl">123</span></span>
<span><span class="va">obs_crs</span> <span class="op">&lt;-</span> <span class="fl">4326</span></span>
<span><span class="va">x_col</span> <span class="op">&lt;-</span> <span class="st">"x"</span></span>
<span><span class="va">y_col</span> <span class="op">&lt;-</span> <span class="st">"y"</span></span>
<span><span class="va">obs_col</span> <span class="op">&lt;-</span> <span class="st">"observation"</span></span>
<span><span class="va">obs_type</span> <span class="op">&lt;-</span> <span class="st">"presence_absence"</span></span>
<span></span>
<span><span class="va">obs</span> <span class="op">&lt;-</span> <span class="fu">format_observation</span><span class="op">(</span></span>
<span>  obs_df <span class="op">=</span> <span class="va">obs_df</span>, split_perc <span class="op">=</span> <span class="va">split_perc</span>,</span>
<span>  x_col <span class="op">=</span> <span class="va">x_col</span>, y_col <span class="op">=</span> <span class="va">y_col</span>,</span>
<span>  obs_col <span class="op">=</span> <span class="va">obs_col</span>, obs_type <span class="op">=</span> <span class="va">obs_type</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># obs, presence-only, no eval</span></span>
<span><span class="va">obs_df</span> <span class="op">&lt;-</span> <span class="va">occ_virtual_species</span></span>
<span><span class="va">eval_df</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span><span class="va">split_perc</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span><span class="va">seed</span> <span class="op">&lt;-</span> <span class="fl">123</span></span>
<span><span class="va">obs_crs</span> <span class="op">&lt;-</span> <span class="fl">4326</span></span>
<span><span class="va">x_col</span> <span class="op">&lt;-</span> <span class="st">"x"</span></span>
<span><span class="va">y_col</span> <span class="op">&lt;-</span> <span class="st">"y"</span></span>
<span><span class="va">obs_col</span> <span class="op">&lt;-</span> <span class="st">"observation"</span></span>
<span><span class="va">obs_type</span> <span class="op">&lt;-</span> <span class="st">"presence_only"</span></span>
<span></span>
<span><span class="va">obs</span> <span class="op">&lt;-</span> <span class="fu">format_observation</span><span class="op">(</span></span>
<span>  obs_df <span class="op">=</span> <span class="va">obs_df</span>, eval_df <span class="op">=</span> <span class="va">eval_df</span>,</span>
<span>  split_perc <span class="op">=</span> <span class="va">split_perc</span>,</span>
<span>  x_col <span class="op">=</span> <span class="va">x_col</span>, y_col <span class="op">=</span> <span class="va">y_col</span>,</span>
<span>  obs_col <span class="op">=</span> <span class="va">obs_col</span>, obs_type <span class="op">=</span> <span class="va">obs_type</span><span class="op">)</span></span>
<span></span></code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Lei Song.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

